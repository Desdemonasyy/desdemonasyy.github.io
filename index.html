<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-区块链学习笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/07/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2022-03-07T15:31:34.000Z" itemprop="datePublished">2022-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/07/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">区块链学习笔记</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="区块链学习笔记"><a href="#区块链学习笔记" class="headerlink" title="区块链学习笔记"></a>区块链学习笔记</h1><h2 id="概括："><a href="#概括：" class="headerlink" title="概括："></a>概括：</h2><p>区块链最直接的词汇就是“<strong>分布式账本</strong>”</p>
<h3 id="分布式账本系统的特点："><a href="#分布式账本系统的特点：" class="headerlink" title="分布式账本系统的特点："></a>分布式账本系统的特点：</h3><ol>
<li>可以<strong>无限增加</strong>的巨型账本——每个区块可以视作这个账本的一页，每增加一个区块，账本就多了一页，这一页中可能会包含一条或多条记录信息；</li>
<li><strong>加密且有顺序</strong>的账本——账目信息会被打包成一个区块并加密，同时盖上时间戳，一个个区块按时间戳顺序链接形成一个总账本；</li>
<li>去<strong>中心化</strong>的账本——由网内用户共同维护的，它是去中心化的。</li>
</ol>
<h2 id="区块链出现原因："><a href="#区块链出现原因：" class="headerlink" title="区块链出现原因："></a>区块链出现原因：</h2><p>​    需要<strong>传输货币信息</strong>，即需要价值转移（区块链是一种价值传输网络）</p>
<h3 id="什么叫价值转移"><a href="#什么叫价值转移" class="headerlink" title="什么叫价值转移"></a>什么叫价值转移</h3><p>​    将某一部分价值从Ａ地址转移到Ｂ地址，那么需要Ａ地址精确地减少这部分价值，而Ｂ地址精确地增加了这部分价值。价值转移涉及Ａ和Ｂ这两个独立参与者，那么这个操作就必须同时得到Ａ和Ｂ地认可，而且，结果还不能收到Ａ和Ｂ任何一方地操纵。</p>
<h3 id="现在的状况"><a href="#现在的状况" class="headerlink" title="现在的状况"></a>现在的状况</h3><p>​    目前价值转移往往不是直接传输，而是由一个中心化的第三方做背书。即通过政府或者集团公司的背书，把所有价值转移的计算都放在一个中心服务器中进行处理，其中一定会涉及人的参与，而人的“有限理论”和“机会主义行为”往往会使整个系统变得不那么可信。</p>
<h2 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h2><p>1.保证系统内数据记录的<strong>完整性和安全性</strong></p>
<ul>
<li>网络中所有授权的参与者都保存了一份完全相同的账本，一旦对账本进行修改，全部副本数据也将在几分钟甚至几秒钟内全部修改完毕。</li>
<li>作为一个分布式账本，账本中的每一笔交易都有一个独一无二的时间戳，这样可以方式重复支付的产生。</li>
</ul>
<p>2.有效降低交易的<strong>复杂性和风险</strong></p>
<ul>
<li>它可以在没有第三方信用背书的情况下，在一个开放式平台上跨越多个遍布全球的节点，进行远距离的安全支付，并且保存所有交易的历史记录。</li>
</ul>
<p>3.<strong>可编程性</strong></p>
<ul>
<li>这是一个开源的技术。</li>
</ul>
<h2 id="互信方式"><a href="#互信方式" class="headerlink" title="互信方式"></a>互信方式</h2><p>1.第三方——国家或大型企业</p>
<p>通过国家或大型企业的背书。</p>
<p>2.技术——区块链</p>
<p>通过一个不断增长的分布式结算数据库，解决信息系统中的信任危机</p>
<h2 id="公信力"><a href="#公信力" class="headerlink" title="公信力"></a>公信力</h2><h3 id="第三方"><a href="#第三方" class="headerlink" title="第三方"></a>第三方</h3><p>​    现实社会中，人与人、人与公司、公司与公司之间的交易需要公信力提供支撑。公信力意指在社会生活中，公共权力面对时间差序、公众交往以及利益交换时，所表现出的一种公平、公正、公开、人道、民主与责任的信任力。当前社会，公信力一般由<strong>政府、国家机关或政府授权的第三方组织来提供</strong>。</p>
<h3 id="区块链"><a href="#区块链" class="headerlink" title="区块链"></a>区块链</h3><p>​    <strong>区块链是一台创造信任的机器。</strong>区块链技术可以很好地满足公信力需求，并把公信力抽象出来作为一个独立的而不是由政府或第三方组织掌控的存在，形成政府、大众、区块链与公幼互相监督的“公信新格局”。信任是建立在区块链上的，非由单个组织掌控，从而公信动可以被多方交叉验证与监督。</p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><p>​    1.区块链是<strong>分布式</strong>的，区块链公信力在网络上会有许多独立的节点，每一节点都有一份备份信息。每个有授权的人都可以从任意一个节点下载全部的信息，同时，区块链公信力网络也是不可篡改的，任何节点企图更改信息都会被其他节点发现，而更改的节点不会被确认，就会立刻丧失公信力。</p>
<p>​    2.区块链<strong>不制定政策</strong>，在区块链公信力模型中，它只是一个公证人的色，是政府建立和执行政策的工具。区块链的作用是帮助政府更快速和准确地让政策被全民所接受与认可，同时，因为区块链是一个不变的、可以被复制的数据库，政府的政策就变得公开和透明。</p>
<h2 id="技术"><a href="#技术" class="headerlink" title="技术"></a>技术</h2><h3 id="比特币"><a href="#比特币" class="headerlink" title="比特币"></a>比特币</h3><h4 id="基本原则"><a href="#基本原则" class="headerlink" title="基本原则"></a>基本原则</h4><p>​    1.是一个纯粹的<strong>点对点电子现金系统</strong>，使在线支付能够直接由一方发起并支付给另一人，中间不需要通过任何金融机构。</p>
<p>​    2.不需要授信的第三方支持就能<strong>防止双重支付</strong>，点对点的网络环境是解决双重支付的一种方案。</p>
<p>​    3.对全部交易<strong>加上时间戳</strong>，并将他们并入一个不断延展的基于哈希算法的工作量证明的链条作为交易记录。除非重新完成全部的工作量证明，形成的交易记录将不可更改。</p>
<p>​    4.最长的链条不仅将作为被观察的事件序列的证明，且被视为来自CPU (中央处理器)的计算能力最大的池。<strong>只要大多数CPU的计算能不被合作攻击的节点所控制，那么就会生成最长的、长度超过攻击者的链条。</strong></p>
<p>​    5.这个系统本身<strong>需要的基础设施非常少</strong>，节点尽最大努力在全网传播信息即可，<strong>节点可以随时离开和重新加入网络</strong>，并将最长的工作量证明作为该节点离线期间发生的交易的证明。</p>
<h4 id="运行比特币网络步骤"><a href="#运行比特币网络步骤" class="headerlink" title="运行比特币网络步骤"></a>运行比特币网络步骤</h4><ol>
<li><p>新的交易向全网进行广播； </p>
</li>
<li><p>每一个节点都将收到的交易信息纳入一个区块中； </p>
</li>
<li><p>每个节点都尝试在自己的区块中找到一个具有足够难度的工作量证明；</p>
</li>
<li><p>当一个节点找到了一个工作量证明，它就向全网进行广播； </p>
</li>
<li><p>当且仅当包含在该区块中的所有交易都是有效的且之前未存在过的，其他节点才认同该区块的有效性； </p>
</li>
<li><p>其他节点表示他们接受该区块，而接受的方法则是跟随在该区块的末尾，制造新的区块以延长该链条，并将该区块的随机散列值视为新区块的随机散列值。</p>
</li>
</ol>
<h3 id="相关规则"><a href="#相关规则" class="headerlink" title="相关规则"></a>相关规则</h3><h4 id="信息分叉"><a href="#信息分叉" class="headerlink" title="信息分叉"></a>信息分叉</h4><p>​    让记录信息所需要的时间段增长，导致写完这句话所用的时刻变得不同。</p>
<h4 id="双花问题"><a href="#双花问题" class="headerlink" title="双花问题"></a>双花问题</h4><p>​    把一笔资金进行两次支付交易的时候，确认时间比较长，所以第一笔交易确认有效后，第二笔交易无法得到确认，使其无法产生双花问题。</p>
<h2 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h2><h3 id="区块"><a href="#区块" class="headerlink" title="区块"></a>区块</h3><p>​    是区块链的基本结构单元，包括元数据的区块头和包含交易数据的区块主体构成。</p>
<h4 id="区块头"><a href="#区块头" class="headerlink" title="区块头"></a>区块头</h4><ol>
<li><p>用于连接前面的区块、索引自父区块哈希值的数据； </p>
</li>
<li><p>挖矿难度、Nonce（随机数，用于工作量证明算法的计数器）、 时间戳；</p>
</li>
<li><p>能够总结并快速归纳校验区块中所有交易数据的Merkle（默克尔）树根数据。</p>
</li>
</ol>
<h3 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h3><h3 id="硬分叉和软分叉"><a href="#硬分叉和软分叉" class="headerlink" title="硬分叉和软分叉"></a>硬分叉和软分叉</h3><h4 id="硬分叉"><a href="#硬分叉" class="headerlink" title="硬分叉"></a>硬分叉</h4><h5 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h5><p>​    硬分叉是指比特币的区块格式或交易格式（这就是广泛流传的“共识”）发生改变时，未升级的节点拒绝验证已经升级的节点生产出的区块，不过已经升级的节点可以验证未升级节点生产出的区块，然后大家各自延续自己认为正确的链，所以分成两条链。</p>
<h5 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h5><ol>
<li><p><strong>没有向前兼容性</strong>，之前的版本将不可再用，需要强制升级； </p>
</li>
<li><p>在区块链层面会有分叉的两条链，一条旧链，一条分叉新链； </p>
</li>
<li><p>需要在某个时间点<strong>全部同意分叉升级</strong>，不同意的将会进入旧 </p>
<p>链。</p>
</li>
</ol>
<h4 id="软分叉"><a href="#软分叉" class="headerlink" title="软分叉"></a>软分叉</h4><h5 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h5><p>​    软分叉是指比特币交易的数据结构发生改变时，未升级的节点可以验证已经升级的节点生产出的区块，而且已经升级的节点也可以验证未升级的节点生产出的区块。</p>
<h5 id="特点-2"><a href="#特点-2" class="headerlink" title="特点"></a>特点</h5><ol>
<li><p><strong>有较好的兼容性</strong>，之前版本的部分功能可用，可不升级； </p>
</li>
<li><p><strong>在区块链层面没有分叉的链</strong>，只是组成链的区块有新区块和旧区块之分；</p>
</li>
<li><p>相当长的时间里，<strong>可允许不进行升级</strong>，继续使用原版本生成旧区 块，与新区块并存。</p>
</li>
</ol>
<h4 id="产生原因"><a href="#产生原因" class="headerlink" title="产生原因"></a>产生原因</h4><ul>
<li>区块链发生永久性分歧，在新共识规则发布后，部分没有升级的节点无法验证已经升级的节点生产的区块，通常硬分叉就会发生。</li>
<li>当新共识规则发布后，没有升级的节点由于不了解新共识规则，就会生产不合法的区块，从而产生临时性分叉，即软分叉。</li>
</ul>
<h4 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h4><p>兼容性的不同，软分叉是<strong>暂时的</strong>，硬分叉是<strong>永久的</strong>。 </p>
<h2 id="四大特点"><a href="#四大特点" class="headerlink" title="四大特点"></a>四大特点</h2><ol>
<li><p><strong>去中心化</strong>：在一个去中心化的金融系统中，没有中介机构，所有节点的权利和义务都相等，任意节点停止工作都不会影响系统整体的运作。</p>
</li>
<li><p><strong>去信任</strong>：系统中所有节点之间无须信任也可以进行交易，因为数据库和整个系统的运作是公开透明的，在系统的规则和时间范围内，节点之间无法欺骗彼此。</p>
</li>
<li><p><strong>集体维护</strong>：系统是由其中具有维护功能的所有节点共同维护的，系统中所有人共同参与维护工作。</p>
</li>
<li><p><strong>可靠的数据库</strong>：系统中每一个节点都拥有最新的完整数据库拷贝，修改单个节点的数据库是无效的，因为系统会自动比较，认为最多次出现的相同数据记录为真。</p>
</li>
</ol>
<h2 id="结构模型"><a href="#结构模型" class="headerlink" title="结构模型"></a>结构模型</h2><p>​    区块链基础架构分为6层，包括<strong>数据层、网络层、共识层、激励层、合约层、应用层</strong>。每层分别完成一项核心功能，各层之间互相配合，实现一个去中心化的信任机制。 </p>
<h3 id="数据层"><a href="#数据层" class="headerlink" title="数据层"></a>数据层</h3><p>​    数据层主要描述区块链技术的<strong>物理形式</strong>。区块链系统设计的技术人员们首先建立的一个起始节点是“<strong>创世区块</strong>”，之后在同样规则下创建的规格相同的区块通过一个链式的结构依次相连组成一条主链条。随着运行时间越来越长，新的区块通过验证后不断被添加到主链上，主链也会不断地延长。</p>
<h3 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h3><p>​    网络层的主要目的是实现区块链网络中<strong>节点之间的信息交流</strong>。区块链网络本质上是一个P2P（点对点）网络。每一个节点既接收信息，也产生信息。节点之间通过维护一个共同的区块链来保持通信。区块链的网络中，每一个节点都可以创造新的区块，在新区块被创造后会以广播的形式通知其他节点，其他节点会对这个区块进行验证，当全区块链网络中超过51%的用户验证通过后，这个新区块就可以被添加到主链上了</p>
<h3 id="共识层"><a href="#共识层" class="headerlink" title="共识层"></a>共识层</h3><p>​    共识层能让高度分散的节点在去中心化的系统中高效地<strong>针对区块数据的有效性</strong>达成共识。区块链中比较常用的共识机制主要有工作量证明、权益证明和股份授权证明三种。</p>
<h3 id="激励层"><a href="#激励层" class="headerlink" title="激励层"></a>激励层</h3><p>​    激励层的主要功能是提供一定的激励措施，<strong>鼓励节点参与区块链的安全验证工作</strong>。</p>
<h3 id="合约层"><a href="#合约层" class="headerlink" title="合约层"></a>合约层</h3><p>​    合约层主要是指各种<strong>脚本代码、算法机制以及智能合约</strong>等。</p>
<h4 id="智能合约"><a href="#智能合约" class="headerlink" title="智能合约"></a>智能合约</h4><h5 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h5><p>是一个计算机程序，是一个任何人都可以使用的去中心化系统，不需要任何中介机构。</p>
<h5 id="形成条件"><a href="#形成条件" class="headerlink" title="形成条件"></a>形成条件</h5><ol>
<li><p>必须有货币参与。</p>
</li>
<li><p>资产必须数字化。</p>
</li>
<li><p>资产必须联网且绝对信任某个数据库。</p>
</li>
</ol>
<h3 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h3><p>​    应用层<strong>封装了区块链的各种应用场景和案例</strong>。</p>
<h2 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h2><h3 id="公有链"><a href="#公有链" class="headerlink" title="公有链"></a>公有链</h3><h4 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h4><p>​    公有链是指全世界任何人都可读取、任何人都能发送交易且交易能获得有效确认，任何人都能参与共识过程的区块链——共识过程决定<strong>哪个区块可被添加到区块链中，同时明确当前状态</strong>。</p>
<h4 id="特点-3"><a href="#特点-3" class="headerlink" title="特点"></a>特点</h4><ol>
<li><p><strong>保护用户免受开发者的影响</strong></p>
<p>在公有链中程序开发者无权干涉用户，区块链可以保护其用户。 </p>
</li>
<li><p><strong>访问门槛低</strong></p>
<p>任何人都可以访问，只要有一台能够联网的计算机就能够满足基本的访问条件。 </p>
</li>
<li><p><strong>所有数据默认公开</strong></p>
<p>公有链中的每个参与者可以看到整个分布式账本中的所有交易记录。</p>
</li>
</ol>
<h3 id="私有链"><a href="#私有链" class="headerlink" title="私有链"></a>私有链</h3><h4 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h4><p>​    私有链是指其写入权限仅在一个组织手里的区块链，目的是<strong>对读取权限或者对外开放权限进行限制</strong>。 </p>
<h4 id="特点-4"><a href="#特点-4" class="headerlink" title="特点"></a>特点</h4><ol>
<li><p><strong>交易速度非常快</strong></p>
<p>私有链中少量的节点具有很高的信任度，并不需要每个节点都来验证一个交易。因此，私有链的交易速度比公有链快很多。 </p>
</li>
<li><p><strong>为隐私提供更好的保障</strong></p>
<p>私有链的数据不会被公开，不能被拥有网络连接的所有人获得。</p>
</li>
<li><p><strong>交易成本大幅降低甚至为零</strong></p>
<p>私有链上可以进行完全免费或者至少说是非常廉价的交易。如果一 个实体机构控制和处理所有的交易，它就不再需要为工作收取费用。 </p>
</li>
<li><p><strong>有助于保护其基本的产品不被破坏</strong></p>
<p>银行和传统的金融机构使用私有链可以保证它们的既有利益，以至 原有的生态体系不被破坏。</p>
</li>
</ol>
<h3 id="联盟链"><a href="#联盟链" class="headerlink" title="联盟链"></a>联盟链</h3><p>​    联盟链是指其共识过程受到预选节点控制的区块链。联盟链可以视为“部分去中心化”。 </p>
<h3 id="许可链"><a href="#许可链" class="headerlink" title="许可链"></a>许可链</h3><p>​    许可链是指每个节点都需要许可才能加入的区块链系统，私有链联盟链都属于许可链。</p>
<h3 id="混合链-x2F-复杂链"><a href="#混合链-x2F-复杂链" class="headerlink" title="混合链&#x2F;复杂链"></a>混合链&#x2F;复杂链</h3><p>随着区块链技术的日益发展，区块链的技术架构不再简单地划分为私有链和公有链，它们之间的界限越来越模糊，所以有了混合链&#x2F;复杂链。</p>
<h2 id="发展脉络"><a href="#发展脉络" class="headerlink" title="发展脉络"></a>发展脉络</h2><h3 id="区块链1-0"><a href="#区块链1-0" class="headerlink" title="区块链1.0"></a>区块链1.0</h3><p>​    以比特币为代表的<strong>可编程货币</strong>。它更多是指数字货币领域的创新，如货币转移、兑付和支付系统等。 </p>
<h3 id="区块链2-0"><a href="#区块链2-0" class="headerlink" title="区块链2.0"></a>区块链2.0</h3><p>​    基于区块链的<strong>可编程金融</strong>。它更多涉及一些合约方面的创新，特别是商业合同以及交易方面的创新，比如股票、证券、期货、贷款、清算结算、所谓的智能合约等。 </p>
<h3 id="区块链3-0"><a href="#区块链3-0" class="headerlink" title="区块链3.0"></a>区块链3.0</h3><p>​    区块链在<strong>其他行业</strong>的应用。它更多地对应人类组织形态的变革，包括健康、科学、文化和基于区块链的司法、投票等。</p>
<h2 id="共识机制"><a href="#共识机制" class="headerlink" title="共识机制"></a>共识机制</h2><h3 id="工作量证明"><a href="#工作量证明" class="headerlink" title="工作量证明"></a>工作量证明</h3><p>​    工作量证明（Proof of Work，简称PoW）通常只能从结果证明，因为监测工作过程通常是<strong>烦琐且低效</strong>的。 </p>
<p>​    比特币在区块的生成过程中使用了PoW机制，一个符合要求的区块哈希值由N个前导零构成，零的个数取决于网络的难度值。要得到合理的区块哈希值需要经过大量的尝试计算，计算时间取决于机器的哈希运算速度。当某个节点提供出一个合理的区块哈希值，说明该节点确实经过了大量的尝试计算，当然，这并不能得出计算次数的绝对值，因为寻找合理的哈希值是一个概率事件。当节点拥有占全网n%的算力时，该节点即有n%的概率找到区块哈希值。 </p>
<p>​    PoW依赖机器进行数学运算来获取记账权，资源<strong>消耗大、共识机制高、可监管性弱</strong>，同时每次达成共识需要全网共同参与运算，<strong>性能效率比较低，容错性方面允许全网50%节点出错</strong>。 </p>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><p><strong>完全去中心化</strong>，节点自由进出。</p>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><p>​    目前比特币已经吸引全球大部分的算力，其他再使用PoW共识机制的区块链应用很难获得相同的算力来<strong>保障自身的安全</strong>；挖矿造成大量的<strong>资源浪费</strong>；共识达成的<strong>周期较长</strong>。 </p>
<h4 id="使用PoW的项目"><a href="#使用PoW的项目" class="headerlink" title="使用PoW的项目"></a>使用PoW的项目</h4><p>​    比特币、以太坊前三个阶段——Frontier（前沿）、Homestead（家园）、Metropolis（大都会）。以太坊的第4个阶段，即Serenity（宁静），将采用权益证明机制。 </p>
<h3 id="权益证明"><a href="#权益证明" class="headerlink" title="权益证明"></a>权益证明</h3><p>权益证明（Proof of Stake，简称PoS）由“Quantum Mechanic”2011年在比特币论坛讲座上首先提出，后经Peercoin（点点币）和NXT（未来币）以不同思路实现。</p>
<h4 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h4><p>​    PoS的主要理念是<strong>节点记账权的获得难度与节点持有的权益成反比</strong>，相比PoW，其在一定程度上减少了数学运算带来的资源消耗，性能也得到了相应的提升，但依然是基于哈希运算，竞争获取记账权的方式，可监管性弱。该共识机制的容错性和PoW相同。它是PoW的一种升级，根据每个节点所占代币的比例和时间，等比例地降低挖矿难度，从而加快找到随机数的速度。 </p>
<p>​    这个系统中存在一个持币人的集合，他们把手中的代币放入PoS机制中，这样他们就变成验证者。比如对区块链最前面的一个区块而言，PoS算法在验证者中随机选取一个（选择验证者的权重依据他们投入的代币量，比如一个投入押金为10 000代币的验证者被选择的概率是一个投入1000代币验证者的10倍），给他权利产生下一个区块。如果在一定时间内，这个验证者没有产生一个区块，则选出第二个验证者代替产生新区块。与PoW一样，PoS以最长的链为准。 </p>
<p>​    但是随着规模经济（指扩大生产规模引起经济效益增加的现象）的消失，中心化所带来的风险减小了，因此，不会有人因为负担得起大规模生产工具而得到不成比例的额外回报。 </p>
<h4 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h4><p>在一定程度上<strong>缩短了共识达成的时间</strong>；<strong>不再需要大量消耗能源去挖</strong>矿。 </p>
<h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><p>还是需要挖矿，<strong>本质上没有解决商业应用的痛点</strong>；所有的确认都只是一个概率上的表达，而不是一个确定性的事情，理论上有可能存在其他攻击影响。</p>
<h3 id="股份授权证明"><a href="#股份授权证明" class="headerlink" title="股份授权证明"></a>股份授权证明</h3><p>​    BitShares（比特股）社区首先提出了股份授权证明（简称DPoS）机制，它与PoS的主要区别在于节点选举若干代理人，由代理人验证和记账，但其合规监管、性能、资源消耗和容错性与PoS相似。类似于董事会投票，持币者投出一定数量的节点，进行代理验证和记账。 </p>
<h4 id="工作原理-1"><a href="#工作原理-1" class="headerlink" title="工作原理"></a>工作原理</h4><p>​    每个股东按其持股比例拥有相应的影响力，51%股东投票的结果将是不可逆且有约束力的，其挑战是通过及时而高效的方法达到“51%批准”。为了达到这个目标，每个股东可以将其投票权授予一名代表。获票数最多的前100位代表按既定时间表轮流产生区块。每位代表分配到一个时间段来生产区块。</p>
<p>​    所有的代表将收到等同于一个平均水平的区块所含交易费的10%作为报酬。如果一个平均水平的区块用100股作为交易费，一位代表将获得一股作为报酬。 </p>
<p>​    网络延迟有可能使某些代表没能及时广播他们的区块，而这将导致区块链分叉。然而，这不太可能发生，因为制造该区块的代表可以与制造该区块前后的区块的代表建立直接连接。建立这种与你之后的代表（也许也包括其后的那名代表）的直接连接是为了确保你能得到报酬。 </p>
<h4 id="执行模式"><a href="#执行模式" class="headerlink" title="执行模式"></a>执行模式</h4><p>DPoS的投票模式可以每30秒产生一个新区块，并且在正常的网络条件下，区块链分叉的可能性极其小，即使发生也可以在几分钟内得到解决。执行该模式的基本步骤如下： </p>
<ol>
<li><p><strong>成为代表</strong>。成为一位代表，你必须在网络上注册你的公钥，并获得一个32位的特有标识符。该标识符会被每笔交易数据的“头部”引用。</p>
</li>
<li><p><strong>授权投票</strong>。每个钱包有一个参数设置窗口，在该窗口里用户可以选择一位或更多的代表，并将其分级。一经设定，用户所做的每笔交易将把选票从“输入代表”转移至“输出代表”。一般情况下，用户不会创建专门以投票为目的的交易，因为那将耗费他们一笔交易费。但在紧急情况下，某些用户可能觉得通过支付费用这一更积极的方式来改变他们的投票是值得的。 </p>
</li>
<li><p><strong>保持代表诚实</strong>。每个钱包将显示一个状态指示器，让用户知道他们的代表表现如何。如果他们错过了太多的区块，那么系统将会推荐用户更换一位新的代表。如果任何代表被发现签发了一个无效的区块，那么所有标准钱包将在每个钱包进行更多交易前要求选出一位新代表。 </p>
</li>
<li><p><strong>抵抗攻击</strong>。在抵抗攻击上，前100位代表所获得的权力是相同的，即每位代表都有一项平等的投票权，因此，无法通过获得超过1%的选票而将权力集中到单一代表上。由于只有100位代表，不难想象一个攻击者可以对每位轮到其生产区块的代表依次进行拒绝服务攻击。幸运的是，由于每位代表的标识是其公钥而非IP地址，这种特定攻击的威胁很容易被减轻。这将使确定DDoS（分布式拒绝服务）攻击目标更为困难。而代表之间的潜在连接将使妨碍他们生产区块变得更为困难。</p>
</li>
</ol>
<h4 id="优点-2"><a href="#优点-2" class="headerlink" title="优点"></a>优点</h4><p>​    大幅<strong>缩小参与验证和记账节点的数量</strong>，可以达到秒级的共识验证。 </p>
<h4 id="缺点-2"><a href="#缺点-2" class="headerlink" title="缺点"></a>缺点</h4><p>​    整个共识机制<strong>还是依赖于代币</strong>，而很多商业应用是不需要代币的。</p>
<h3 id="投注共识"><a href="#投注共识" class="headerlink" title="投注共识"></a>投注共识</h3><p>​    投注共识是以太坊下一代的共识机制Casper（鬼马小精灵）引入的一个全新概念，属于PoS。Casper的共识是按区块达成的，而不是像PoS那样按链达成。 </p>
<p>​    为了防止验证人在不同的世界中提供不同的投注，我们还有一个简单严格的条款：<strong>如果你两次的投注序号一样，或者说你提交了一个无法让Casper依照合约处理的投注，你将失去所有保证金。</strong>即Casper有惩罚机制，并且在Casper协议下的验证人需要完成出块和投注两个活动。</p>
<h4 id="惩罚机制"><a href="#惩罚机制" class="headerlink" title="惩罚机制"></a>惩罚机制</h4><p>非法节点通过恶意攻击网络不仅得不到交易费，而且还面临着保证金被没收的风险。</p>
<h4 id="出块"><a href="#出块" class="headerlink" title="出块"></a>出块</h4><p>出块是一个独立于其他所有事件而发生的过程，验证人收集交易，当轮到他们的出块时间时，他们就制造一个区块，并签名，然后发送到网络上。</p>
<h4 id="投注"><a href="#投注" class="headerlink" title="投注"></a>投注</h4><p>目前Casper默认的验证人策略被设计为模仿传统的拜占庭容错共识：观察其他的验证人如何投注，取33%处的值，向0或者1进一步移动。 </p>
<h4 id="确认当前状态的过程"><a href="#确认当前状态的过程" class="headerlink" title="确认当前状态的过程"></a>确认当前状态的过程</h4><ol>
<li>下载所有的区块和投注</li>
<li>用上面的算法来形成自己的意见，但是不公布意见；它只要简单地按顺序在每个高度进行观察，如果一个区块的概率高于0.5就处理它，否则就跳过它。</li>
<li>在处理所有的区块之后所得到的状态就可以显示为区块链的“当前状态”。</li>
<li>客户端还可以给出对于“最终确定”的主观看法：如果高度k之前的每个区块形成的意见高于99.999%或者低于0.001%，那么客户端就可以认为前k个区块已经最终确定。</li>
</ol>
<h3 id="瑞波共识机制"><a href="#瑞波共识机制" class="headerlink" title="瑞波共识机制"></a>瑞波共识机制</h3><p>​    瑞波共识算法使一组节点能够基于特殊节点列表形成共识。初始特殊节点列表要接纳一个新成员，必须由该节点的51%的会员投票通过。共识遵循这些核心成员的“51%权力”，外部人员则没有影响力。</p>
<h4 id="优点-3"><a href="#优点-3" class="headerlink" title="优点"></a>优点</h4><p>瑞波系统将股东们与其投票权隔开，因此，它比其他系统更中心化。 </p>
<h4 id="缺点-3"><a href="#缺点-3" class="headerlink" title="缺点"></a>缺点</h4><p>由于该共识由中心化开始，它将一直是中心化的，而如果它开始腐化，内部成员们就什么也做不了。</p>
<h3 id="Pool验证池"><a href="#Pool验证池" class="headerlink" title="Pool验证池"></a><strong>Pool</strong>验证池</h3><p>​    基于<strong>传统的分布式一致性技术以及数据验证机制</strong>，Pool（联营）验证池是目前行业内大范围使用的共识机制。</p>
<h4 id="优点-4"><a href="#优点-4" class="headerlink" title="优点"></a>优点</h4><p>​    不需要代币也可以工作，在成熟的分布式一致性算法（Pasox、Raft）的基础上，实现秒级共识验证。</p>
<h4 id="缺点-4"><a href="#缺点-4" class="headerlink" title="缺点"></a>缺点</h4><p>​    去中心化程度不如比特币，更适合多方参与的多中心商业模式。 </p>
<h3 id="实用拜占庭容错"><a href="#实用拜占庭容错" class="headerlink" title="实用拜占庭容错"></a>实用拜占庭容错</h3><p>​    实用拜占庭容错机制是一种采用“许可投票、少数服从多数”来选举领导者并进行记账的共识机制，该共识机制允许拜占庭容错，允许强监管节点参与，具备权限分级能力，性能更高，耗能更低，而且每轮记账都会由全网节点共同选举领导者，允许33%的节点作恶，容错性为33%。由于特别适合联盟链的应用场景，实用拜占庭容错机制及其改进算法为目前使用最多的联盟链共识算法，其改进算法在以下方面进行调整：修改底层网络拓扑的要求，使用P2P网络；可以动态地调整节点数量；减少协议使用的消息数量。</p>
<h4 id="实用拜占庭容错算法简介"><a href="#实用拜占庭容错算法简介" class="headerlink" title="实用拜占庭容错算法简介"></a>实用拜占庭容错算法简介</h4><p>最早由卡斯特罗和利斯科夫在1999年提出的实用拜占庭容错（PBFT）是第一个得到广泛应用的拜占庭容错算法。只要系统中有2&#x2F;3的节点是正常工作的，就可以保证一致性。 </p>
<h4 id="总体过程"><a href="#总体过程" class="headerlink" title="总体过程"></a>总体过程</h4><p>客户端向主节点发送请求调用服务操作，如<strong>“&lt;REQUEST,o,t,c&gt;”</strong>，这里客户端c请求执行操作o，时间戳t用来保证客户端请求只会执行一次。</p>
<p>每个由副本节点发给客户端的消息都包含了当前的<strong>视图编号</strong>，使得客户端能够追踪视图编号，从而进一步推算出当前主节点的编号。其中视图编号是<strong>连续编号的整数</strong>。主节点由公式**p &#x3D; v mod |R|**计算得到，这里v是视图编号，p是副本编号，|R|是副本集合的个数。 </p>
<p>客户端通过点对点消息向它自己认为的主节点发送请求，然后主节点自动将该请求向所有备份节点进行广播。</p>
<p>主节点通过广播将请求发送给其他<strong>副本</strong>，其中副本发给客户端的响应为<strong>“&lt;REPLY,v,t,c,i,r&gt;”</strong>，v是视图编号，t是时间戳，i是副本的编号，r是请求执行的结果。 </p>
<p>然后就开始执行三个阶段的任务。</p>
<ol>
<li><p>预准备阶段。主节点分配一个序列号n给收到的请求，然后向所有备份节点群发预准备消息，预准备消息的格式为“&lt;&lt;PRE–PREPARE,v,n,d&gt;,m&gt;”，这里v是视图编号，m是客户端发送的请求消息，d是请求消息m的摘要。 </p>
</li>
<li><p>准备阶段。如果备份节点i接受了预准备消息，则进入准备阶段。在准备的同时，该节点向所有副本节点发送准备消息“&lt;PREPARE,v,n,d,i&gt;”，并且将预准备消息和准备消息写入自己的消息日志。</p>
</li>
<li><p>确认阶段。当“(m,v,n,i)”条件为真的时候，副本i“&lt;COMMIT,v,n,D(m),i&gt;”向其他副本节点广播，于是就进入了确认阶段。所有副本都执行请求并将结果发回客户端。客户端需要等待不同副本节点发回相同的结果，作为整个操作的最终结果。</p>
</li>
</ol>
<p>如果客户端没有在有限时间内收到回复，请求将向所有副本节点进行广播；如果该请求已经在副本节点处理过了，副本就向客户端重发一遍执行结果；如果请求没有在副本节点处理过，该副本节点将把请求转发给主节点；如果主节点没有将该请求进行广播，那么就认为主节点失效；如果有足够多的副本节点认为主节点失效，则会触发一次视图变更。</p>
<h3 id="授权拜占庭容错"><a href="#授权拜占庭容错" class="headerlink" title="授权拜占庭容错"></a>授权拜占庭容错</h3><h4 id="核心"><a href="#核心" class="headerlink" title="核心"></a>核心</h4><p>最大限度地确保系统的最终性，使区块链能够适用于真正的金融应用场景。 </p>
<h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><p>2016年4月，小蚁公司发布共识算法白皮书，描述了一种通用的共识机制——授权拜占庭容错，提出了一种改进的拜占庭容错算法，使其能够适用于区块链系统。授权拜占庭容错算法在实用拜占庭容错算法的基础上进行了以下改进： </p>
<ol>
<li><p>将C&#x2F;S（客户机&#x2F;服务器）架构的请求响应模式改进为适合P2P网络的对等节点模式； </p>
</li>
<li><p>将静态的共识参与节点改进为可动态进入、退出的共识参与节点；</p>
</li>
<li><p>为共识参与节点的产生设计了一套基于持有权益比例的投票机制，通过投票决定共识参与节点（记账节点）； </p>
</li>
<li><p>在区块链中引入数字证书，解决了投票中对记账节点真实身份的认证问题。授权拜占庭容错机制的优点：专业化的记账人；可以容忍任何类型的错误；记账由多人协同完成；每一个区块都有最终性，不会分叉；算法的可靠性有严格的数学证明。</p>
</li>
</ol>
<h4 id="缺点-5"><a href="#缺点-5" class="headerlink" title="缺点"></a>缺点</h4><p>​    当1&#x2F;3及以上的记账人停止工作后，系统将无法提供服务；当1&#x2F;3及以上的记账人联合作恶，且其他所有的记账人被恰好分割为两个网络孤岛时，恶意记账人可以使系统出现分叉，但是会留下密码学证据。 </p>
<h3 id="帕克索斯算法"><a href="#帕克索斯算法" class="headerlink" title="帕克索斯算法"></a>帕克索斯算法</h3><p>这是一种传统的分布式一致性算法，是一种基于选举领导者的共识机制。</p>
<h4 id="优点-5"><a href="#优点-5" class="headerlink" title="优点"></a>优点</h4><p>领导者节点拥有绝对权限，并允许强监管节点参与，其性能高，资源消耗低。</p>
<h4 id="缺点-6"><a href="#缺点-6" class="headerlink" title="缺点"></a>缺点</h4><p>所有节点一般有线下准入机制，但选举过程中不允许有作恶节点，不具备容错性。 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/03/07/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-id="cl0gvb9tq0001ikughoq5bxnj" data-title="区块链学习笔记" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">区块链学习笔记</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/03/07/hello-world/" class="article-date">
  <time class="dt-published" datetime="2022-03-07T14:17:53.314Z" itemprop="datePublished">2022-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/03/07/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/03/07/hello-world/" data-id="cl0gvb9t90000ikug6rnubpxe" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">区块链学习笔记</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">区块链学习笔记</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/03/07/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">区块链学习笔记</a>
          </li>
        
          <li>
            <a href="/2022/03/07/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>